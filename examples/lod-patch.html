<head> </head>
<body>
  <div id="container"></div>
  <script type="module" async>
    import { quadPatch } from "../src/lod-patches.ts";
    import { asSvg, circle, svgDoc } from "@thi.ng/geom";
    import { dist } from "@thi.ng/vectors";
    import { flatMap } from "lodash-es";

    const patches = [
      // [2, 4, 8, 2],
      [32, 64, 64, 4],
      [64, 16, 16, 32],
      [8, 4, 8, 8],
      [8, 32, 64, 16],
    ].map((weights) => quadPatch(...weights));
    // console.log(patches)

    patches.forEach(({ points, index }) => {
      // console.log(points)

      const circles = points.map(
        (p) =>
          circle(
            p.map((x) => 800 * x),
            2
          ) //500*dist(p, index.queryKeys(p, 40, 2)[1]) / 2)
      );

      const svg = document.createElement("svg");
      document.querySelector('div#container').appendChild(svg);
      svg.outerHTML = asSvg(
        svgDoc(
          {
            fill: "deeppink",
            stroke: "none",
            //
            // width: "100%",
            // height: "100%",
          },
          ...circles
        )
      );
    });
  </script>
  <style>
    body {
      margin:20em;
      background-color: black;
    }
    #container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      grid-gap: 0;
      width:100%;
    }
    svg {
      aspect-ratio: 1/1;
      padding: 0;
      margin:0;
      width:100%;
      height: 100%;
    }

  </style>
</body>
