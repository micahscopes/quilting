<head>
</head>
<body>
  <script type="module" async>
    import { quadPatch } from "../src/lod-patches.ts";
    import { asSvg, circle, svgDoc } from "@thi.ng/geom";
    import { dist } from "@thi.ng/vectors";
    import { flatMap } from 'lodash-es';

    const patches = [
      [2,32,8,2], [8,8,8,8], [32,32,64,32], [64,64,64,8]
      // [2,4,8,2], [2,16,8,4],[8,16,8,8],
      //  [8,16,32,16],
    ].map(weights => quadPatch(...weights))
    // console.log(patches)

    for (let {points, index} of patches) {
      console.log(points)

      const circles = points.map((p) =>
        circle(p.map(x => 800*x), 3)//500*dist(p, index.queryKeys(p, 40, 2)[1]) / 2)
      );

      const div = document.createElement('div')
      div.innerHTML = asSvg(
        svgDoc({ fill: "none", stroke: "blue", width: "800px", height:"800px" }, ...circles)
      );
      document.body.appendChild(div)
      const style = document.body.style
      style.gridTemplateColumns = "50% 50%"
      style.display = "grid"
      // style.setProperty('display', 'grid')
    }
    // const {points, index} = quadPatch(2,32,64,128);
    // window.points = points
    // use thi.ng/geom to visualize results
    // each circle's radius is set to distance to its nearest neighbor
  </script>
</body>
